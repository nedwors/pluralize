# Pluralize

[![Latest Version on Packagist](https://img.shields.io/packagist/v/nedwors/pluralize.svg?style=flat-square)](https://packagist.org/packages/nedwors/pluralize)
[![Build Status](https://img.shields.io/travis/nedwors/pluralize/master.svg?style=flat-square)](https://travis-ci.org/nedwors/pluralize)
[![Quality Score](https://img.shields.io/scrutinizer/g/nedwors/pluralize.svg?style=flat-square)](https://scrutinizer-ci.com/g/nedwors/pluralize)
[![Total Downloads](https://img.shields.io/packagist/dt/nedwors/pluralize.svg?style=flat-square)](https://packagist.org/packages/nedwors/pluralize)

A Laravel package that provides null-safe, meaningful pluralization of strings. 

Often, it's desired to not only show a current count, but some description of the count too. Plus, you need to allow for when the count is `null`.

> The stuff of nightmares...
>
> `Call to a member function count() on null`

So, let's see it in action. From this:

```php
@if($pizzas)

{{ $pizzas->count() }} {{ Str::plural('Pizza') }}

@else

-

@endif

// 2 Pizzas
// -
```

To this:

```php
{{ pluralize('Pizza', $pizzas) }}

// 2 Pizzas
// -
```

Although made with the Blade templating engine in mind, it can be used anywhere in your application.

## TOC

- [Installation](#installation)
    * [Setup](#setup)
- [Introduction](#introduction)
    * [Core Principles](#core-principles)
    * [Helper vs Class](#helper-vs-class)
- [Features/API](#features/api)
    * [Pluralize](#pluralize)
    * [This](#this)
    * [From](#from)
    * [Or](#or)
    * [As](#as)
- [Configuration](#configuration)
    * [Default Bindings](#default-bindings)
    * [Specific Bindings](#specific-bindings)
    

## Installation

You can install the package via composer

```bash
composer require nedwors/pluralize
```
### Setup
Minimal, if any, setup is required. The package is ready to work out of the box with sensible defaults. 

The defaults are shown below. The 1st comment represents the returned string when `$pizzas` has a count of 10; the 2nd represents when `$pizzas` is null:

```php
pluralize('Pizza', $pizzas)

// 10 Pizzas
// -
```
However you are free to [configure](#configuration) these defaults, and fine tune the system further.

## Introduction

### Core Principles
There are two strings that can be generated by Pluralize. These are the Output and the Fallback.

#### Output
The Output is the desired string to display successful pluralization. As stated in [Setup](#setup), the default Output is in the format `n Items`, with `n` the count, and `Items` the pluralized string.

#### Fallback
The Fallback is the desired string to display in the case there is no count. As stated in [Setup](#setup), the default Fallback is `-`.

Both the Output and Fallback can be declared either at time of usage or ahead of time. See [`as()`](#as) for Output and [`or()`](#or) for Fallback. See [configuration](#configuration) for declaring ahead of time.

### Helper vs Class
This documentation's examples are based on the helper function `pluralize()`. However, the underlying class can be used just the same for every feature. For instance, the following are equivalent:

```php
pluralize('Dog', $dogs, '...')

Pluralize::this('Dog')->from($dogs)->or('...')
```

## Features/API

### Pluralize

The Pluralize class has 4 main functions:

```php
Pluralize::this(...)->from(...)->as(...)->or(...)
```

The `pluralize()` helper function has 4 parameters that map to these functions:

```php
pluralize('this', 'from', 'or', 'as')
```
You'll notice that `or` is listed before `as` in the parameter list. This helps with usability for most use cases.

As `pluralize()` returns an instance of `Pluralize`, it can be accessed fluently if you so wish. 

```php
pluralize(...)->from(...)->as(...)->or(...)
```

### This
The singular form of the string you wish to be pluralized.


```php
// The first argument to the helper function

pluralize('Rocket')
```

### From
The count/total/sum you wish to pluralize the string from and/or display.

The variable you pass can be an `int`, an `array`, a [`Collection`](https://laravel.com/docs/8.x/collections), a [`LengthAwarePaginator`](https://laravel.com/docs/8.x/pagination#displaying-pagination-results) or a [`Paginator`](https://laravel.com/docs/8.x/pagination#displaying-pagination-results).

```php
// The second argument to the helper function

pluralize('Rocket', $rockets)

// Or, as a method

pluralize('Rocket')->from($rockets)
```
   
> By this point, it's worth noting that you are good to go. Nothing more  is required for most uses.
> 
> Pluralize does provide extra features for more flexibility. These are detailed below, as well as [configuration](#configuration).

### Or

The [Fallback](#fallback) you wish to use. Basically, the string to display if the [count](#from) is `null`.

This is not required. If not provided, it will simply defer to the default [Fallback](#fallback).

```php
// The third argument to the helper function

pluralize('Rocket', $rockets, '...')

// Or, as a method

pluralize('Rocket', $rockets)->or('...')
```

In addition to providing a `string`, you can pass a `Closure` that will receive the pluralized form of the word.

```php
pluralize('Rocket', $rockets)
    ->or(fn($plural) => "Oops, $plural is not defined")

// Oops, Rockets is not defined
```
##### Why would I ever write a `Closure` when I can just type `Oops, Rockets is not defined`?

It's true, it's probably unlikely. But at least the power is there if needed. For instance, perhaps you want to grab the `Auth::user()`, or give context with the current time.

However, the power of using a `Closure` really comes to the fore when [configuring](#configuration) the package.

### As

The [Output](#output) you wish to use. Basically, the format to display the pluralization.

Like [Or](#or), this is not required. If not provided, it will simply defer to the default [Output](#output).

The most useful means is declaring this as a `Closure`, which is passed the plural form of the string and the count.

```php
// The fourth argument to the helper function

pluralize('Rocket', $rockets, '...', fn($plural, $count) => "$plural: $count")

// Or, probably more usefully, as a method

pluralize('Rocket', $rockets)->as(fn($plural, $count) => "$plural: $count")

// Rockets: 10
```
How about if you wanted something along the lines of `there are 10 Rockets`? When there's 1 `Rocket`, you'll end up with `There are 1 Rocket`... Hmm. Well, the pipe operator is your friend! Simply declare the singular output to the left, the plural to the right.
```php
pluralize('Rocket', $rockets)
    ->as(fn($plural, $count) => "There is|are $count $plural")

// There is 1 Rocket
// There are 2 Rockets
```
Now, you can pass a `string` if you really, really want to...
```php
pluralize('Rocket', $rockets)
    ->as('Not sure how many, but you have some Rockets')

// Now sure how many, but you have some Rockets
```
But this is most useful when used with your [configuration](#configuration).

## Configuration
You can easily declare different formats for use in your app. This is done via `Pluralize::bind()` in the `boot()` method of your Service Provider.
### Default Bindings
You can declare the default formats for use in your app by calling `Pluralize::bind()` with no arguments
```php
// In your service provider's boot() method
Pluralize::bind()
    ->output(fn($plural, $count) => "$plural: $count")
    ->fallback('...')

// In your view
pluralize('Car', $cars)

// When $cars = null, ...
// When $cars = 10, Cars: 10
```

> The default Output is `n items`. The default Fallback is `-`.

### Specific Defaults
You can reference the word you want to pluralize for specific formatting

```php
// In your service provider's boot() method
Pluralize::bind('Hotdog')
    ->output(fn($plural, $count) => "Yum, $count hotdogs!")

// In your view
pluralize('Car', $cars) // 10 Cars
pluralize('Hotdog', $hotdogs) // Yum, 10 hotdogs!
```
You can set an arbitrary key to then refer to at time of render

```php
// In your service provider's boot() method
Pluralize::bind('ye-olde')
    ->fallback(fn($plural) => "Thou hath not declared $plural")

// In your view
pluralize('Robot', null) // -
pluralize('DeLorean', null)->or('ye-olde') // Thou hath not declared DeLoreans
```



The default outputs of the package are:


```php
pluralize('Pizza', $pizzas)

// When $pizzas = null, '-'
// When $pizzas = 10, '10 Pizzas'
```

Supports `null` fallbacks:

```php
pluralize('Pizza', $pizzas)
    ->or('Oops, pizzas not found')

// When $pizzas = null, 'Oops, pizzas not found'
```

```php
pluralize('Pizza', $pizzas)
    ->over(0)
    ->as(fn($plural, $count) => "You have $count $plural")
    ->or('Oops, you have no pizzas')

// When $pizzas = null, 'Oops, you have no pizzas'
// When $pizzas->count() = 1, 'You have 1 pizza'
// When $pizzas->count() = 2, 'You have 2 pizzas'
```

```php
pluralize('Pizza', $pizzas)
    ->as(fn($plural, $count) => "There is|are $count $plural")

// When $pizzas->count() = 1, 'There is 1 pizza'
// When $pizzas->count() = 2, 'There are 2 pizzas'
```

## Usage

``` php
// Usage description here
```

### Testing

``` bash
composer test
```

### Changelog

Please see [CHANGELOG](CHANGELOG.md) for more information what has changed recently.

## Contributing

Please see [CONTRIBUTING](CONTRIBUTING.md) for details.

### Security

If you discover any security related issues, please email nedwors@gmail.com instead of using the issue tracker.

## Credits

- [Sam Rowden](https://github.com/nedwors)
- [All Contributors](../../contributors)

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.

## Laravel Package Boilerplate

This package was generated using the [Laravel Package Boilerplate](https://laravelpackageboilerplate.com).
